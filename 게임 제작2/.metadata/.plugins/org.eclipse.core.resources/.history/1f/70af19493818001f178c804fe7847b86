package Tile;

import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.IOException;

import javax.imageio.ImageIO;

import main.GamePanel;

public class TileManger {

	GamePanel gp;
	int[][] mapTileNum;
	Tile[] tile;
	TileRead tileReader;
	
    String Cave1 = "C:\\Users\\kuroc\\OneDrive\\바탕 화면\\과제\\JAVA\\게임 제작2\\main\\src\\gameBackground\\동굴1.txt"; // 파일 경로 설정
    
	
	
	public TileManger(GamePanel gp){
		this.gp = gp;
		tile = new Tile[10];	// 타일 종류
		getTileImage();
		tileReader = new TileRead();
		mapTileNum = new int[gp.maxScreenCol][gp.maxScreenRow];
	}
	
	public void getTileImage() {
		try {
			tile[0] = new Tile();
			tile[0].image = ImageIO.read(getClass().getResourceAsStream("/tiles/돌바닥.png"));
			tile[1] = new Tile();
			tile[1].image = ImageIO.read(getClass().getResourceAsStream("/tiles/돌바닥2.png"));
			tile[2] = new Tile();
			tile[2].image = ImageIO.read(getClass().getResourceAsStream("/tiles/돌바닥3.png"));
			tile[3] = new Tile();
			tile[3].image = ImageIO.read(getClass().getResourceAsStream("/tiles/버튼.png"));
			tile[4] = new Tile();
			tile[4].image = ImageIO.read(getClass().getResourceAsStream("/tiles/돌벽_상.png"));
			tile[5] = new Tile();
			tile[5].image = ImageIO.read(getClass().getResourceAsStream("/tiles/돌벽_중.png"));
			tile[6] = new Tile();
			tile[6].image = ImageIO.read(getClass().getResourceAsStream("/tiles/돌벽_하.png"));
			tile[7] = new Tile();
			tile[7].image = ImageIO.read(getClass().getResourceAsStream("/tiles/돌벽_꼭대기.png"));
			

		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	public void draw(Graphics2D g2) {
	    int[][] matrix = tileReader.readMatrixFromFile(Cave1);
	    
	    int worldCol = 0;
	    int worldRow = 0;
	    
	    while(worldCol<gp.maxWorldCol && worldRow<gp.maxWorldRow) {

			int[][] mapTileNum = null;
			int tileNum = mapTileNum[worldCol][worldRow];
			
			int worldX = worldCol * gp.getOrigianlCharacterSize();
            int worldY = worldRow * gp.getOrigianlCharacterSize();
            int screenX = worldX - gp.player.worldX + gp.player.screenX + gp.player.screenX;
            int screenY = worldY - gp.player.worldY + gp.player.screenY + gp.player.screenY;
            
            BufferedImage image = tile[tileNum].image;
            
            g2.drawImage(image, screenX, screenY, gp.getOrigianlCharacterSize(),gp.getOrigianlCharacterSize(),null);

	    }
	}


}